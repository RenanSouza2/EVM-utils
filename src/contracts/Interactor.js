'use struct'

import { ethers } from "ethers";
import { deployBytecode } from "../utils/deploy.js";
import { provider } from "../utils/provider.js";



const bytecode = '0x608060405234801561001057600080fd5b5061041b806100206000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c80631b8b921d14610030575b600080fd5b61004a60048036038101906100459190610159565b610060565b6040516100579190610236565b60405180910390f35b60608273ffffffffffffffffffffffffffffffffffffffff1682604051610087919061021f565b600060405180830381855afa9150503d80600081146100c2576040519150601f19603f3d011682016040523d82523d6000602084013e6100c7565b606091505b5090508091505092915050565b60006100e76100e28461027d565b610258565b905082815260208101848484011115610103576101026103ae565b5b61010e848285610307565b509392505050565b600081359050610125816103ce565b92915050565b600082601f8301126101405761013f6103a9565b5b81356101508482602086016100d4565b91505092915050565b600080604083850312156101705761016f6103b8565b5b600061017e85828601610116565b925050602083013567ffffffffffffffff81111561019f5761019e6103b3565b5b6101ab8582860161012b565b9150509250929050565b60006101c0826102ae565b6101ca81856102b9565b93506101da818560208601610316565b6101e3816103bd565b840191505092915050565b60006101f9826102ae565b61020381856102ca565b9350610213818560208601610316565b80840191505092915050565b600061022b82846101ee565b915081905092915050565b6000602082019050818103600083015261025081846101b5565b905092915050565b6000610262610273565b905061026e8282610349565b919050565b6000604051905090565b600067ffffffffffffffff8211156102985761029761037a565b5b6102a1826103bd565b9050602081019050919050565b600081519050919050565b600082825260208201905092915050565b600081905092915050565b60006102e0826102e7565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b82818337600083830152505050565b60005b83811015610334578082015181840152602081019050610319565b83811115610343576000848401525b50505050565b610352826103bd565b810181811067ffffffffffffffff821117156103715761037061037a565b5b80604052505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600080fd5b600080fd5b600080fd5b600080fd5b6000601f19601f8301169050919050565b6103d7816102d5565b81146103e257600080fd5b5056fea26469706673582212204a777941bf3d14371fa580e2b3caff8f82937322a38a44cccc38ac3273e9488c64736f6c63430008070033';

const ABI = [
    'function call(address _address, bytes memory data) view returns (bytes memory res)'
];

export function interactotAt(address) {
    return new ethers.Contract(address, ABI, provider);
}

export async function deployInteractor() {
    const address = await deployBytecode(bytecode);
    return interactotAt(address);
}